const $ = el => document.querySelector(el);
const $$ = el => document.querySelectorAll(el);

//color theme
if (localStorage.getItem("color-theme") == 1) {
	$('.color-theme-button').checked = false;
	colorTheme();
}

let colorCounter = 0;
$('.switch-wrapper').onclick = function () {
	colorCounter++;
	if (colorCounter % 2 == 0) {
		localStorage.getItem("color-theme") == 0
			? localStorage.setItem("color-theme", 1)
			: localStorage.setItem("color-theme", 0);
		colorTheme();
	}
}

function colorTheme() {
	$$('.slider-b').forEach(it => it.classList.toggle('slider-b-white'));
	$('body').classList.toggle('white-bg');
	$('body').classList.toggle('scroll-white');
	$$('.brk-btn').forEach(it => it.classList.toggle('brk-btn-black'))
	$$('.fa-check').forEach(it => it.classList.toggle('fa-white'))
	$$('.contact').forEach(it => it.classList.toggle('contact-white'))
	$$('.fa-phone')[1].classList.toggle('fa-phone-white');
	$('.white-end div').classList.toggle('end-desc-white')
}

//language

let language = window.navigator ? (window.navigator.language ||
	window.navigator.systemLanguage ||
	window.navigator.userLanguage) : "ru";
language = language.substr(0, 2).toLowerCase();

console.log(language)

if (!localStorage.getItem("language")) {
	if (language == 'ru') {
		$('.language-button').checked = false;
		ruTranslator();
	} else {
		$('.language-button').checked = true;
		language = 'en'
	}
}

if (localStorage.getItem("language") == 'ru') {
	$('.language-button').checked = false;
	ruTranslator();
}
if (localStorage.getItem("language") == 'en') {
	$('.language-button').checked = true;
	language = 'en'
}

let lang = 0;
$('.switch-language').onclick = (() => {
	lang++;
	if (lang % 2 == 0) language == 'en' ? ruTranslator() : enTranslator();
});

function ruTranslator() {
	$('header > div.container-fluid > div:nth-child(1) > div.col-sm-2.offset-sm-9.col-2.offset-8.switch-wrapper.color-theme-wrapper > label > div').classList.add('switch-desk-ru')
	$('header > div.container-fluid > div:nth-child(1) > div.col-sm-2.offset-sm-9.col-2.offset-8.switch-wrapper.color-theme-wrapper > label > div').innerText = 'Цветная тема'

	$('.first-section .h1').innerText = 'Добро Пожаловать';
	$('.switch-desk-lang').innerText = 'Russian'
	$('.first-section .h1').style.letterSpacing = '-0.035em'
	$('.first-section .h1').style.fontSize = '64px'
	$('.first-section .h3').style.fontSize = '28px'
	$('.first-section .h3').innerText = 'Здесь собрана небольшая коллекция работ, и немного о себе';
	$('.below-first-screen').innerText = 'Ниже представлены cайты и не только, которые мне довелось делать'

	$$('.brk-btn').forEach(it => it.innerText = 'Посетить');

	$('.portfolio > div:nth-child(1) > div > div > h2').innerText = 'Моя библиотека'
	$('.portfolio > div:nth-child(1) > div > div > div > h3').innerText = 'Здесь я собрал разные программы, игры и другие прикольные штуки, которые делал. Некоторые действительно интересные на мой взгляд.'
	$('.portfolio > div:nth-child(2) > div > div > h2').innerText = 'Магазин на React.js'
	$('.portfolio > div:nth-child(2) > div > div > div > h3').innerText = 'Я закончил несколько курсов по React и решил закрепить свои знания и сделал интернет магазин на Реакте.'
	$('.portfolio > div:nth-child(3) > div > div > h2').innerText = 'Верстка сайта'
	$('.portfolio > div:nth-child(3) > div > div > div > h3').innerText = 'Сделал верстку лендинга в качестве тренировки. Добавил адаптивность и навигацию по меню.'
	$('.portfolio > div:nth-child(4) > div > div > div > h3').innerHTML = 'Прошел <a class="href" target="_blank" href = "https://www.youtube.com/playlist?list=PLqGj3iMvMa4IyCbhul-PdeiDqmh4ooJzk" > серию видео с канала DevTips</a > и научился делать очень прикольные параллакс эффекты.Автор делал все на jQuery, я делал все параллельно с ним, но на нативном JS.От себя добавил поддержку тёмной темы.Чтобы сменить тему нужно, нажать на логотип в правом верхнем меню.'
	$('.portfolio > div:nth-child(5) > div > div > h2').innerText = 'Инстаграм бот'
	$('.portfolio > div:nth-child(5) > div > div > div > h3').innerText = 'Когда изучал NodeJS, написал Инстаграм бот. Он собирает массив людей лайкнувших любой пост, и проходит по ним, может ставить лайки, подписываться, писать комментарии. Я тестил на фейковом аккаунте пару недель и набрал 2к подписчиков. Это отличная штука для интернет магазинов. Если интересно, я оставил ссылку на GitHub.'

	$('.my-skills-title').innerText = 'Мои Навыки'
	$('.connect-title').innerText = 'Для связи'
	$('.end-desc').innerText = 'Спасибо за внимание'

	language = 'ru';
	localStorage.setItem("language", 'ru');
}
function enTranslator() {
	$('header > div.container-fluid > div:nth-child(1) > div.col-sm-2.offset-sm-9.col-2.offset-8.switch-wrapper.color-theme-wrapper > label > div').innerText = 'Color theme'
	$('header > div.container-fluid > div:nth-child(1) > div.col-sm-2.offset-sm-9.col-2.offset-8.switch-wrapper.color-theme-wrapper > label > div').classList.remove('switch-desk-ru')
	$('.switch-desk-lang').innerText = 'English'
	$('.first-section .h1').innerText = 'Welcome';
	$('.first-section .h1').style.letterSpacing = '0'
	$('.first-section .h1').style.fontSize = '71px'
	$('.first-section .h3').style.fontSize = '31px'
	$('.first-section .h3').innerText = 'Here is a collection of works, and about myself';
	$('.below-first-screen').innerText = 'Below are the sites and not only that I did'

	$$('.brk-btn').forEach(it => it.innerText = 'visit');

	$('.portfolio > div:nth-child(1) > div > div > h2').innerText = 'My Library'
	$('.portfolio > div:nth-child(1) > div > div > div > h3').innerText = 'Here I collected programs, games and other cool stuff that I did. Some really interesting in my opinion.'
	$('.portfolio > div:nth-child(2) > div > div > h2').innerText = 'Store on React.js'
	$('.portfolio > div:nth-child(2) > div > div > div > h3').innerText = 'I completed several courses on React.js and decided to consolidate my knowledge and made an online store on React.'
	$('.portfolio > div:nth-child(3) > div > div > h2').innerText = 'Layout'
	$('.portfolio > div:nth-child(3) > div > div > div > h3').innerText = 'Made layout of the landing page as a workout. Added adaptability and menu navigation.'
	$('.portfolio > div:nth-child(4) > div > div > div > h3').innerHTML = 'Passed <a class="href" target="_blank" href="https://www.youtube.com/playlist?list=PLqGj3iMvMa4IyCbhul-PdeiDqmh4ooJzk">course from channel Devtips</a> and learned to make very cool parallax effects. The author did everything in jQuery, I did everything parallel to it, but on native JS. I added support for a dark theme from myself. To change the subject you need click on the logo in the upper right menu.'

	$('.portfolio > div:nth-child(5) > div > div > h2').innerText = 'Instagram Bot'
	$('.portfolio > div:nth-child(5) > div > div > div > h3').innerText = 'When I studied NodeJS, I wrote Instagram bot. He collects an array of people who like any post, and goes through them, can like, subscribe, write comments. I tested on a fake account for a couple of weeks and scored 2k subscribers. This is a great thing for online stores. If interested, I left a link to GitHub.'

	$('.my-skills-title').innerText = 'My Skills'
	$('.connect-title').innerText = 'For connection'
	$('.end-desc').innerText = 'Thanks for attention'

	language = 'en';
	localStorage.setItem("language", 'en');
}


// First Screen Appear
window.onload = function () {
	let x = 0, y = 0.0001, w = 0, z = 0.0001, start = false;

	let welcome1 = setInterval(() => {
		$('.first-section .h1').style.opacity = y;
		x += 0.00017
		y += x;
		if (y >= 0.23) start = true;
		if (y >= 1) clearInterval(welcome1);
	}, 16);

	let welcome2 = setInterval(() => {
		if (start) {
			$('.first-section .h3').style.opacity = z;
			w += 0.000006
			z += w;
			if (z >= 1) clearInterval(welcome2);
		}
	}, 2)
}

// Color End height

let pageHeight = document.documentElement.clientHeight;

$('.end-desc').style.paddingBottom = `${pageHeight / 2}px`;
$('.end-desc').style.marginTop = `${pageHeight / 2}px`;


window.onscroll = function (e) {
	let pageHeight = document.documentElement.clientHeight;

	//opacity by appear
	if ($(".first-desc").getBoundingClientRect().top > 200) {
		$(".first-desc").style.opacity =
			Math.abs($(".first-desc").getBoundingClientRect().top - pageHeight) / 300;
	}

	if ($(".first-desc").getBoundingClientRect().top < 200 &&
		$(".first-desc").getBoundingClientRect().top > - 1000) {
		$(".first-desc").style.opacity = ($(".first-desc").getBoundingClientRect().top + 100) / 200
	}

	// animate
	$$('.anime-dis').forEach(function (item) {
		if (item.getBoundingClientRect().top - (pageHeight - 0) < 0) item.classList.add('anime');
	})

	$$('.anime-second-dis').forEach(function (item) {
		if (item.getBoundingClientRect().top - (pageHeight - 0) < 0) {
			setTimeout(() => item.classList.add('anime'), 250)
		}
	})

	if ($('.anime-right').getBoundingClientRect().top - (pageHeight - 100) < 0) {
		$$('.anime-right').forEach(function (item, i) {
			item.classList.add('anime');
			item.style.transitionDelay = `${(i / 8.3) + 0.1}s`;
		})
	}

	// animation left/right
	// if (document.querySelector('.anime-left-connect').getBoundingClientRect().top - (pageHeight) < 0) {
	// 	document.querySelectorAll('.anime-left-connect').forEach(function (item, i) {
	// 		item.classList.add('anime-left-connect-on');
	// 		item.style.transitionDelay = `${(i / 8.3) + 0.1}s`;
	// 	})
	// }

	// if (document.querySelector('.anime-right-connect').getBoundingClientRect().top - (pageHeight) < 0) {
	// 	document.querySelectorAll('.anime-right-connect').forEach(function (item, i) {
	// 		item.classList.add('anime-right-connect-on');
	// 		item.style.transitionDelay = `${(i / 8.3) + 0.1}s`;
	// 	})
	// }

	// color end
	$$('.white-end').forEach(function (item) {
		if (item.getBoundingClientRect().top - (pageHeight / 1.8) < 0) {
			document.body.classList.add('wb');
			setTimeout(() => $('.end-desc').classList.add('edn-desc-see'), 1050)
		} else {
			document.body.classList.remove('wb');
			$('.end-desc').classList.remove('edn-desc-see');
		}
	})

	if (localStorage.getItem("theme") == 0) {
		$$('.white-end').forEach(function (item) {
			if (item.getBoundingClientRect().top - (pageHeight / 1.8) < 0) {
				$('.end-desc').style.transition = `4.3s ease`;
				document.body.classList.add('wb');
				setTimeout(() => $('.end-desc').classList.add('edn-desc-see'), 1900)
			} else {
				document.body.classList.remove('wb');
				$('.end-desc').classList.remove('edn-desc-see');
			}
		})
	}

	if (localStorage.getItem("theme") == 1) {
		$$('.white-end').forEach(function (item) {
			if (item.getBoundingClientRect().top - (pageHeight / 1.8) < 0) {
				$('.end-desc').style.transition = `4.3s ease`;
				document.body.classList.add('wb-white');
				setTimeout(() => $('.end-desc-white').classList.add('edn-desc-see'), 1900)
			} else {
				document.body.classList.remove('wb-white');
				$('.end-desc-white').classList.remove('edn-desc-see');
			}
		})
	}
}

// navigate phone
$('.first-section-fa').onclick = function () {
	let pos = $('.connect').getBoundingClientRect().top;
	window.scrollBy(0, pos - 100);
}



