// Webdev привет) Я месяц назад устроился в местную компанию, на кative приложухи делаю, так что всё шикарно в принципе)
 
const $ = el => document.querySelector(el),
	$$ = el => document.querySelectorAll(el),
	ls = localStorage;

(function controlColorTheme() {
	if (!ls.getItem("theme")) ls.setItem("theme", 0)

	if (ls.getItem("theme") == 1) {
		$('.color-theme-button').checked = false
		colorTheme();
	}

	let colorCounter = 0;
	$('.switch-wrapper').onclick = function () {
		colorCounter++;
		if (colorCounter % 2 == 0) {
			ls.getItem("theme") == 0 ? ls.setItem("theme", 1) : ls.setItem("theme", 0)
			colorTheme();
		}
	}

	function colorTheme() {
		$('.first-section a').classList.toggle('github-href-white')
		$$('.slider-b').forEach(it => it.classList.toggle('slider-b-white'));
		$('body').classList.toggle('white-bg');
		$('body').classList.toggle('scroll-white');
		$$('.brk-btn').forEach(it => it.classList.toggle('brk-btn-black'))
		$$('.fa-check').forEach(it => it.classList.toggle('fa-white'))
		$$('.contact').forEach(it => it.classList.toggle('contact-white'))
		$('.fa-phone').classList.toggle('fa-phone-white');
		$('.white-end div').classList.toggle('end-desc-white')
	}
})();


(function controlLanguage() {
	let language = window.navigator ? (window.navigator.language ||
		window.navigator.systemLanguage ||
		window.navigator.userLanguage) : "ru";
	language = language.substr(0, 2).toLowerCase();

	if (!ls.getItem("language")) {
		if (language == 'ru') {
			$('.language-button').checked = false;
			ruTranslator();
		} else {
			$('.language-button').checked = true;
			language = 'en'
		}
	}

	if (ls.getItem("language") == 'ru') {
		$('.language-button').checked = false;
		ruTranslator();
	} else {
		$('.language-button').checked = true;
		language = 'en'
	}

	let lang = 0;
	$('.switch-language').onclick = (() => {
		lang++;
		if (lang % 2 == 0) language == 'en' ? ruTranslator() : enTranslator();
	});

	function ruTranslator() {
		$('.color-theme-wrapper > label .switch-desk').classList.add('switch-desk-ru')
		$('.color-theme-wrapper > label .switch-desk').innerText = 'Цветная тема'

		$('.switch-desk-lang').innerText = 'Russian'
		$('.first-section .h1').innerText = 'Добро Пожаловать';
		$('.first-section .h1').classList.add('h1-ru')
		$('.first-section .h3').classList.add('h3-ru')
		$('.first-section .h3').innerText = 'Здесь собрана коллекция работ, и немного о себе';
		$('.below-first-screen').innerText = 'Ниже представлены cайты и не только, которые мне довелось делать'

		$$('.brk-btn').forEach(it => it.innerText = 'Посетить');

		$('.portfolio-library h2').innerText = 'Моя библиотека'
		$('.portfolio-library h3').innerText = 'Здесь я собрал разные программы, игры и другие прикольные штуки, которые делал. Некоторые действительно интересные на мой взгляд.'
		$('.portfolio-store-react h2').innerText = 'Магазин на Реакт'
		$('.portfolio-store-react h3').innerText = 'Я закончил несколько курсов по React и решил закрепить свои знания и сделал интернет магазин на Реакте.'
		$('.portfolio-blog-react h2').innerText = 'Блог на Реакт'
		$('.portfolio-blog-react h3').innerText = 'Сделал интерфейс для ведения личного блога на Реакте'
		$('.portfolio-layout h2').innerText = 'Верстка сайта'
		$('.portfolio-layout h3').innerText = 'Сделал верстку лендинга в качестве тренировки. Добавил адаптивность и навигацию по меню.'
		$('.portfolio-instagram-bot h2').innerText = 'Инстаграм бот'
		$('.portfolio-instagram-bot h3').innerText = 'Когда изучал NodeJS, написал Инстаграм бот. Он собирает массив людей лайкнувших любой пост, и проходит по ним, может ставить лайки, подписываться, писать комментарии. Я тестил на фейковом аккаунте пару недель и набрал 2к подписчиков. Это отличная штука для интернет магазинов. Если интересно, я оставил ссылку на GitHub.'

		$('.my-skills-title').innerText = 'Мои Навыки'
		$('.connect-title').innerText = 'Для связи'
		$('.end-desc').innerText = 'Спасибо за внимание'

		language = 'ru';
		ls.setItem("language", 'ru');
	}
	function enTranslator() {
		$('.color-theme-wrapper > label .switch-desk').innerText = 'Color theme'
		$('.color-theme-wrapper > label .switch-desk').classList.remove('switch-desk-ru')
		$('.switch-desk-lang').innerText = 'English'
		$('.first-section .h1').innerText = 'Welcome';
		$('.first-section .h1').classList.remove('h1-ru')
		$('.first-section .h3').innerText = 'Here is a collection of works, and about myself';
		$('.first-section .h3').classList.remove('h3-ru')
		$('.below-first-screen').innerText = 'Below are the sites and not only that I did'

		$$('.brk-btn').forEach(it => it.innerText = 'visit');

		$('.portfolio-library h2').innerText = 'My Library'
		$('.portfolio-library h3').innerText = 'Here I collected programs, games and other cool stuff that I did. Some really interesting in my opinion.'
		$('.portfolio-store-react h2').innerText = 'Store on React.js'
		$('.portfolio-store-react h3').innerText = 'I completed several courses on React.js and decided to consolidate my knowledge and made an online store on React.'
		$('.portfolio-blog-react h2').innerText = 'Blog on React.js'
		$('.portfolio-blog-react h3').innerText = 'Made an interface for maintaining a personal blog on React'
		$('.portfolio-layout h2').innerText = 'Layout'
		$('.portfolio-layout h3').innerText = 'Made layout of the landing page as a workout. Added adaptability and menu navigation.'
		$('.portfolio-instagram-bot h2').innerText = 'Instagram Bot'
		$('.portfolio-instagram-bot h3').innerText = 'When I studied NodeJS, I wrote Instagram bot. He collects an array of people who like any post, and goes through them, can like, subscribe, write comments. I tested on a fake account for a couple of weeks and scored 2k subscribers. This is a great thing for online stores. If interested, I left a link to GitHub.'

		$('.my-skills-title').innerText = 'My Skills'
		$('.connect-title').innerText = 'Get in touch'
		$('.end-desc').innerText = 'Thanks for attention'

		language = 'en';
		ls.setItem("language", 'en');
	}
})();


// First Screen Appear
window.onload = function () {
	let x = 0, y = 0.0001, w = 0, z = 0.0001, start = false;

	const welcome1 = setInterval(() => {
		$('.first-section .h1').style.opacity = y;
		x += 0.00017
		y += x;
		if (y >= 0.23) start = true;
		if (y >= 1) clearInterval(welcome1);
	}, 16);

	const welcome2 = setInterval(() => {
		if (start) {
			$('.first-section .h3').style.opacity = z;
			w += 0.000006
			z += w;
			if (z >= 1) clearInterval(welcome2);
		}
	}, 2)
};

// Color End height
let pageHeight = document.documentElement.clientHeight;

$('.end-desc').style.paddingBottom = `${pageHeight / 2}px`;
$('.end-desc').style.marginTop = `${pageHeight / 2}px`;

setTimeout(() => $('.end-desc').style.transition = `4.3s ease`, 300)

window.onscroll = function (e) {
	//opacity by appear
	if ($(".first-desc").getBoundingClientRect().top > 200) {
		$(".first-desc").style.opacity =
			Math.abs($(".first-desc").getBoundingClientRect().top - pageHeight) / 300;
	}

	if ($(".first-desc").getBoundingClientRect().top < 200 &&
		$(".first-desc").getBoundingClientRect().top > - 1000) {
		$(".first-desc").style.opacity = ($(".first-desc").getBoundingClientRect().top + 100) / 200
	}

	// animate
	$$('.anime-dis').forEach(function (item) {
		if (item.getBoundingClientRect().top - (pageHeight - 0) < 0) item.classList.add('anime');
	})

	$$('.anime-second-dis').forEach(function (item) {
		if (item.getBoundingClientRect().top - (pageHeight - 0) < 0) {
			setTimeout(() => item.classList.add('anime'), 250)
		}
	})

	if ($('.anime-right').getBoundingClientRect().top - (pageHeight - 100) < 0) {
		$$('.anime-right').forEach(function (item, i) {
			item.classList.add('anime');
			item.style.transitionDelay = `${(i / 8.3) + 0.1}s`;
		})
	}

	// animation left/right
	// if (document.querySelector('.anime-left-connect').getBoundingClientRect().top - (pageHeight) < 0) {
	// 	document.querySelectorAll('.anime-left-connect').forEach(function (item, i) {
	// 		item.classList.add('anime-left-connect-on');
	// 		item.style.transitionDelay = `${(i / 8.3) + 0.1}s`;
	// 	})
	// }

	// if (document.querySelector('.anime-right-connect').getBoundingClientRect().top - (pageHeight) < 0) {
	// 	document.querySelectorAll('.anime-right-connect').forEach(function (item, i) {
	// 		item.classList.add('anime-right-connect-on');
	// 		item.style.transitionDelay = `${(i / 8.3) + 0.1}s`;
	// 	})
	// }

	// color end
	$$('.white-end').forEach(function (item) {
		if (item.getBoundingClientRect().top - (pageHeight / 1.8) < 0) {
			document.body.classList.add('wb');
			setTimeout(() => $('.end-desc').classList.add('edn-desc-see'), 1050)
		} else {
			document.body.classList.remove('wb');
			$('.end-desc').classList.remove('edn-desc-see');
		}
	})

	if (ls.getItem("theme") == 0) {
		$$('.white-end').forEach(function (item) {
			if (item.getBoundingClientRect().top - (pageHeight / 1.8) < 0) {
				document.body.classList.add('wb');
				setTimeout(() => $('.end-desc').classList.add('edn-desc-see'), 1900)
			} else {
				document.body.classList.remove('wb');
				$('.end-desc').classList.remove('edn-desc-see');
			}
		})
	}

	if (ls.getItem("theme") == 1) {
		$$('.white-end').forEach(function (item) {
			if (item.getBoundingClientRect().top - (pageHeight / 1.8) < 0) {
				document.body.classList.add('wb-white');
				setTimeout(() => $('.end-desc-white').classList.add('edn-desc-see'), 1900)
			} else {
				document.body.classList.remove('wb-white');
				$('.end-desc-white').classList.remove('edn-desc-see');
			}
		})
	}
}

// navigate phone
// $('.first-section-fa').onclick = function () {
// 	let pos = $('.connect').getBoundingClientRect().top;
// 	window.scrollBy(0, pos - 100);
// }


